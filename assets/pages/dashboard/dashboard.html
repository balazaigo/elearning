<div class="container-fluid">
  <div class="row">
    <div class="col-12 title-head dash-head">
      <h3>Hello, Ganesh Gopalan! </h3>
      <p>Manage your day to day tasks with style! Enjoy a well built UI system</p>
    </div>
  </div>  
  <div class="row">
    <div class="col-12 title-head mb-2">
      <h4>Tasks <dfn data-info="Lorem ipsum dolor sit amet, perspiciatis consectetur dolor."><i class="fas fa-info-circle"></i></dfn></h4>
      <span class=" nbtn">
      <p class="vmore"><a href="#">View All</a></p>
      </span> </div>
  </div>
  <div class="white-bg col-md-12">
    <div class="container-fluid p-0">
      <div class="col-12 p-3 pb-0">
      <div class="row">
        <div class="col-lg-6 col-md-6">
          <div class="searchbar">
            <h4>List of Tasks </h4>
          </div>
        </div>
        <div class="col-lg-6 col-md-6 top-btn">
          <div class="row">
            <div class="col-lg-9 col-md-9">
              <div class="topsearch relative">
                <input class="form-control form-control-dark w-100" type="text" placeholder="Search here" aria-label="Search">
                <i class="fas fa-search"></i> </div>
            </div>
            <div class="col-lg-3 col-md-3">
              <div class="dropdown-select">
                <select class="form-control sort-select">
                  <option value="Recent">Sort By</option>
                  <option value="New">New</option>
                  <option value="Active">Active</option>
                  <option value="Completed">Completed</option>
                  <option value="Onhold">Onhold</option>
                </select>
              </div>
            </div>
          </div>
        </div>
      </div>
      </div>
      <div class="tabs white-bg p-3 mt-3">
        <input type="radio" name="tabs" id="tabone" checked="checked">
        <label for="tabone">Assigned To</label>
        <div class="tab p-0">
          <div class="table-section">
            <table class="table table-bordered responsive">
              <thead>
                <tr>
                  <th>
                    <div class="form-check">
                      <input class="form-check-input parentcheck" name="chk" type="checkbox" value="flexCheckDefault1" id="myCheck" onClick="selects()">
                      <label class="form-check-label" for="myCheck"> </label>
                    </div>
                  </th>
                  <th>TASK ID</th>
                  <th>NAME OF THE TASK</th>
                  <th>ASSIGNED TO</th>
                  <th>END DATE</th>
                  <th>STATUS</th>
                  <th class="text-center">ACTIONS</th>
                </tr>
              </thead>
              <tbody id="data-assignedTo">

             </tbody>
            </table>
            <div id="pagination-container-to"></div>
          </div>
        </div>
        <input type="radio" name="tabs" id="tabtwo">
        <label for="tabtwo">Assigned By</label>
        <div class="tab p-0">
          <div class="table-section">
            <table class="table table-bordered responsive">
              <thead>
                <tr>
                  <th><div class="form-check">
                      <input class="form-check-input parentcheck" name="chk" type="checkbox" value="" id="myCheckBy" onClick="selects()" >
                      <label class="form-check-label" for="myCheck"> </label>
                    </div></th>
                  <th>TASK ID</th>
                  <th>NAME OF THE TASK</th>
                  <th>ASSIGNED BY</th>
                  <th>END DATE</th>
                  <th>STATUS</th>
                  <th class="text-center">ACTIONS</th>
                </tr>
              </thead>
              <tbody id="data-assignedBy">

              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<script type="text/javascript">
$( document ).ready(function() {
  if($( "#pagination-container-to" ).length > 0) {
    $('#pagination-container-to').pagination({
      dataSource: 'https://reqres.in/api/users',
      locator: 'data',
      totalNumberLocator: function(response) {
        return response.total;
      },
      alias: {
        pageNumber: 'page',
        pageSize: 'per_page'
      },  
      pageSize: 5,
      ajax: {
        beforeSend: function() {
          //Loading Message
          //$('#data-assignedTo').html('<tr><td class="text-center" colspan="3">Loading data from Fake Json...</td></tr>');
        },
        complete: function(jqXHR, textStatus) {
          if (jqXHR.status === 200 || jqXHR.readyState === 0 || jqXHR.status === 0) {
            return false; // do nothing
          } else if (jqXHR && jqXHR.status === 403) {
            window.location.href = window.location.href.split('/').slice(0, 3).join('/') + '/login';
          } else {
            alert('error');
          }
        },    
      },
      callback: function(data, pagination) {
        var html = template(data);
        $('#data-assignedTo').html(html);
        $('#data-assignedBy').html(html);
      }
    });
  }
});
/* 
  Pagination 
  Function: pagination->template
  Description: on fly change the appearance  
*/
function template(data) {
  var html = '';
  $.each(data, function(index, item) {
    html += '<tr>';
    
    html += `
    <td>
      <div class="form-check">
        <input class="form-check-input" name="chk" type="checkbox" value="`+ item.id +`" id="chk_`+ item.id +`">
        <label class="form-check-label" for="chk_`+ item.id +`"> </label>
      </div>
    </td>
    `;
    html += '<td><span class="badge bg-success gridTaskID">#'+ item.id +'</span></td>';
    html += '<td>'+ item.email +'</td>';
    html += '<td>'+ item.first_name + ' ' + item.last_name +'</td>';
    html += '<td>'+ (randomDate(new Date(2012, 0, 1), new Date())) +'</td>';
    html += '<td>'+ randomStatus() +'</td>';
    html += `
      <td class="text-center">
      <div class="dropdown ahide">
        <button class="btn dropdown-toggle dbtn btn-light" type="button" id="dropdownMenuButton3" data-bs-toggle="dropdown" aria-expanded="false">
          <i class="fas fa-ellipsis-v"></i></button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton3">
          <li><a class="dropdown-item green" href="#">Edit</a></li>
          <li><a class="dropdown-item red" href="#">Disable</a></li>
          <li><a class="dropdown-item red" href="#">Delete</a></li>
        </ul>
      </div>
      </td>
    `;
    html += '</tr>';
  });
  html += '';
  return html;
}

/*====================================================================================*/
/* FOR TESTING PURPOSE DO NOT USE BELOW CODE FOR PRODUCTION*/
/*====================================================================================*/
function randomDate(start, end) {
  //randomDate(new Date(2012, 0, 1), new Date())
  return new Date(start.getTime() + Math.random() * (end.getTime() - start.getTime())).toISOString().slice(0, 10);
}
function randomStatus(){
  var statusCode = Math.floor(Math.random() * 2);
  if(statusCode == 0) {
    return '<span class="badge bg-warning">On Hold</span>';
  }
  return '<span class="badge bg-success">Active</span>';
}
/*====================================================================================*/
/*====================================================================================*/
</script>