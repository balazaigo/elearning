<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Home</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/boxicons@2.0.5/css/boxicons.min.css"
      rel="stylesheet"
    />
    <link
      href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
      rel="stylesheet"
    />

    <link
      rel="stylesheet"
      href="../assets/global/jquery.multiselect.css"
    />

    <!-- Paginations  -->
    <link 
      rel="stylesheet" 
      href="https://cdnjs.cloudflare.com/ajax/libs/paginationjs/2.1.5/pagination.css" 
      integrity="sha512-QmxybGIvkSI8+CGxkt5JAcGOKIzHDqBMs/hdemwisj4EeGLMXxCm9h8YgoCwIvndnuN1NdZxT4pdsesLXSaKaA==" 
      crossorigin="anonymous" referrerpolicy="no-referrer" />    
    <!-- Paginations  -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.0.1/fullcalendar.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/chart.min.js" integrity="sha512-QSkVNOCYLtj73J4hbmVoOV6KVZuMluZlioC+trLpewV8qMjsWqlIQvkn1KGX2StWvPMdWGBqim1xlC8krl1EKQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link href="../assets/global/style.css" rel="stylesheet" />
    <link href="../assets/global/mediaquery.css" rel="stylesheet" />

    <link href="../assets/pages/course/course.css" rel="stylesheet" />
    <link href="../assets/pages/courses/courses.css" rel="stylesheet" />
    <link href="../assets/global/fileup.css" rel="stylesheet" />
    
    <!-- Toastr -->
    <link href="../assets/global/toastr/toastr.min.css" rel="stylesheet" />
    <!-- EOF Toastr -->
    
    <script defer src="../assets/global/jquery.history.js"></script>
    <script defer src="../assets/global/language.js"></script>
    <script defer src="../assets/global/auth.js"></script>
  </head>
  <body style="display:none">
    <div
      class="side-navbar active-nav d-flex justify-content-between flex-wrap flex-column"
      id="sidebar"
    >
      <nav class="animated bounceInDown">
        <div class="dashlogo">
          <a href="./" class="my-2 mb-4"
            ><img src="../assets/images/logo.svg" alt="Exper" />
          </a>
        </div>
        <ul class="text-white w-100 pt-4" id="navRight">
          <li>
            <!--<a href="#" data-flinkto="dashboard">-->
              <a href="dashboard/dashboard" data-flinkto="dashboard" class="dashboard">
              <img class="menuicon" src="../assets/images/dash.svg" alt="Dashboard" />
              <span class="mx-2" data-flinkto="dashboard">Dashboard</span></a
            >
          </li>
          <li>
            <!--<a href="#" data-flinkto="cases">-->
              <a href="cases/case" data-flinkto="cases" class="cases">
              <img class="menuicon" src="../assets/images/course.svg" alt="Cases" />
              <span class="mx-2" data-flinkto="cases">Cases</span></a
            >
          </li>
          <!--<li>
            <a href="#" data-flinkto="modules"
              ><img class="menuicon" src="../assets/images/course.svg" alt="Modules" />
              <span class="mx-2" data-flinkto="modules">Modules</span></a
            >
          </li>-->
          <!-- this is for chapter page But renamed as module-->
          <li>
            <!--<a href="#" data-flinkto="chapters">-->
              <a href="chapters/chapters" data-flinkto="chapters" class="chapters">
              <img class="menuicon" src="../assets/images/course.svg" alt="Chapters" />
              <span class="mx-2" data-flinkto="chapters">Modules</span></a
            >
          </li>
          <li>
            <!--<a href="#" data-flinkto="courses" rel="course">-->
              <a href="courses/courses" data-flinkto="courses" class="courses">
              <img class="menuicon" src="../assets/images/course.svg" alt="course" />
              <span class="mx-2" data-flinkto="courses">Courses</span></a
            >
          </li>
          <li>
            <!--<a href="#" data-flinkto="roles" rel="View Role">-->
              <a href="roles/roles" data-flinkto="roles" class="roles">
              <img class="menuicon" src="../assets/images/roles.svg" alt="roles" />
              <span class="mx-2" data-flinkto="roles">Roles</span></a
            >
          </li>
          <li>
            <!--<a href="#" data-flinkto="task" rel="task">-->
              <a href="task/task" data-flinkto="task" class="task">
              <img class="menuicon" src="../assets/images/task.svg" alt="task" />
              <span class="mx-2" data-flinkto="task">Task</span></a
            >
          </li>
          <li>
              <!--<a href="#" data-flinkto="members" rel="View Member">-->

              <a href="members/members" data-flinkto="members" class="members">
              <img class="menuicon" src="../assets/images/roles.svg" alt="members" />
              <span class="mx-2" data-flinkto="members">Members</span></a
            >
          </li>
          <!--<li>
            <a href="#" data-flinkto="courseslistnew" rel="course"
              ><img class="menuicon" src="../assets/images/course.svg" alt="course" />
              <span class="mx-2" data-flinkto="courseslistnew">Courseslistnew</span></a
            >
          </li>-->
          <li class="sub-menu d-none">
            <a href="#"
              ><img class="menuicon" src="../assets/images/setting.svg" alt="settings" />
              <span class="mx-2">Settings</span>
              <div class="fa fa-caret-down right"></div>
            </a>
            <ul>
              <li><a href="#">Account</a></li>
              <li><a href="#">Profile</a></li>
              <li><a href="#">Secruity &amp; Privacy</a></li>
              <li><a href="#">Password</a></li>
              <li><a href="#">Notification</a></li>
            </ul>
          </li>
        </ul>
      </nav>
      <a class="btn border-0" id="menu-btn"><i class="bx bx-menu"></i></a>
    </div>
    <div class="my-container active-cont">
      <!-- Top Nav -->
      <nav class="navbar top-navbar navbar-light sticky-top">
        <div class="container-fluid topnav p-0">
          <div class="row w-100">
            <div class="col-lg-7 col-md-7 relative">
              <div class="topsearch">
                <input
                  class="form-control form-control-dark w-100"
                  type="text"
                  placeholder="Search"
                  aria-label="Search"
                />
                <i class="fas fa-search"></i>
              </div>
              <div class="dashlogo">
                <a href="./" class="my-2 mb-4"
                  ><img src="../assets/images/logo.svg" alt="Exper" />
                </a>
              </div>
            </div>
            <div class="col-lg-5 col-md-5 top-right">
              <span>
                <div class="top-btn-notify">
                  <i
                    id="reveal-click"
                    
                    class="fas fa-bell"
                  ></i>
                  <div id="hidden-div">
                    <div class="notify">
                      <div class="row">
                        <div class="col-md-8">
                          <h4>User Notifications</h4>
                        </div>
                        <div class="col-md-4 n-new"><p><a href="#">19 New</a></p></div>
                      </div>
                    </div>
                    <ul>
                      <li class="Myid1">                        
                        <div class="ntext">
                          <h4><img src="../assets/images/member1.png" alt="" /> George Bluth1</h4>
                          <div class="dropdown">
                            <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton2" data-bs-toggle="dropdown" aria-expanded="false">
                              2 minutes ago
                            </button>
                            <ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="dropdownMenuButton2">
                              <li><a class="dropdown-item" href="#">Active</a></li>
                              <li><a class="dropdown-item" href="#">Inactive</a></li>
                            </ul>
                          </div>
                        </div>
                        <i id="Myid1" onclick="closeText(this)" class="far fa-times-circle" style="font-size: 20px;"></i>
                      </li>
                      <li class="Myid2">                        
                        <div class="ntext">
                          <h4><img src="../assets/images/member1.png" alt="" /> George Bluth2</h4>
                          <div class="dropdown">
                            <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton2" data-bs-toggle="dropdown" aria-expanded="false">
                              2 minutes ago
                            </button>
                            <ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="dropdownMenuButton2">
                              <li><a class="dropdown-item" href="#">Active</a></li>
                              <li><a class="dropdown-item" href="#">Inactive</a></li>
                            </ul>
                          </div>
                        </div>
                        <i id="Myid2" onclick="closeText(this)" class="far fa-times-circle" style="font-size: 20px;"></i>
                      </li>
                      <li class="Myid3">                        
                        <div class="ntext">
                          <h4><img src="../assets/images/member1.png" alt="" /> George Bluth3</h4>
                          <div class="dropdown">
                            <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton2" data-bs-toggle="dropdown" aria-expanded="false">
                              2 minutes ago
                            </button>
                            <ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="dropdownMenuButton2">
                              <li><a class="dropdown-item" href="#">Active</a></li>
                              <li><a class="dropdown-item" href="#">Inactive</a></li>
                            </ul>
                          </div>
                        </div>
                        <i id="Myid3" onclick="closeText(this)" class="far fa-times-circle" style="font-size: 20px;"></i>
                      </li>
                      <li class="Myid4">                        
                        <div class="ntext">
                          <h4><img src="../assets/images/member1.png" alt="" /> George Bluth4</h4>
                          <div class="dropdown">
                            <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton2" data-bs-toggle="dropdown" aria-expanded="false">
                              2 minutes ago
                            </button>
                            <ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="dropdownMenuButton2">
                              <li><a class="dropdown-item" href="#">Active</a></li>
                              <li><a class="dropdown-item" href="#">Inactive</a></li>
                            </ul>
                          </div>
                        </div>
                        <i id="Myid4" onclick="closeText(this)" class="far fa-times-circle" style="font-size: 20px;"></i>
                      </li>
                    </ul>
                    <div class="notify-link">
                      <div class="row">
                        <div class="col-md-12 text-center"><p><a href="#">See all Notifications</a></p></div>
                      </div>
                    </div>
                  </div>
                </div>
              </span>
              <span>
                <div class="top-btn">
                  <div class="dropdown">
                    <img src="" alt="" id="userProfileImageHead"/>
                    <button class="btn dropdown-toggle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false"></button>
                    <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                      <!--<li><a class="dropdown-item disabled" href="#">View Profile</a></li>
                      <li><a class="dropdown-item disabled" href="#">Company Profile</a></li>-->
                      <li><a class="dropdown-item logout" href="#">Sign Out</a></li>
                    </ul>
                  </div>
                </div>
              </span>
            </div>
          </div>
        </div>
      </nav>
      <!--End Top Nav -->
      <div class="content-part p-3 pt-4 pb-5 relative" id="app-admin"></div>
      <footer class="fixed-bottom">
        <section class="footer-section">
          <div class="container-fluid">
            <div class="row">
              <div class="col-12">
                <p>Â© 2022 Medvarsity</p>
              </div>
            </div>
          </div>
        </section>
      </footer>
    </div>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.8.3/jquery.min.js"
      type="text/javascript"
    ></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.15.1/moment.js"></script>
    <script
      src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js"
      type="text/javascript"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
    <script src="../assets/pages/testPage/js/index.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="../assets/config.js"></script>
    <script src="../assets/global/custom.js"></script>
    <script src="../assets/global/validate.min.js"></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.full.min.js"
      type="text/javascript"
    ></script>
    <!-- Paginations  -->
    <script 
      src="https://cdnjs.cloudflare.com/ajax/libs/paginationjs/2.1.5/pagination.min.js" 
      integrity="sha512-1zzZ0ynR2KXnFskJ1C2s+7TIEewmkB2y+5o/+ahF7mwNj9n3PnzARpqalvtjSbUETwx6yuxP5AJXZCpnjEJkQw==" 
      crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <!-- Paginations  -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.0.1/fullcalendar.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dropzone/4.3.0/dropzone.js"></script> 
    <script src="../assets/global/jquery.mjs.nestedSortable.js"></script>
    <script src="../assets/global/toastr/toastr.min.js"></script>
    <script src="../assets/global/jquery.multiselect.js"></script>
    <script src="../assets/global/helper.js"></script>
    <script src="../assets/pages/roles/js/roleAPI.js"></script>
    <script src="../assets/pages/roles/js/createRole.js"></script>
    <script src="../assets/pages/members/js/memberAPI.js"></script>
    <script src="../assets/pages/members/js/createMember.js"></script>
    <script src="../assets/global/adminMainMenu.js"></script>    
    <script src="../assets/global/ckeditor/ckeditor.js"></script>
    <script src="../assets/pages/course/course.js"></script>
    <script src="../assets/global/fileup.js"></script>
    <script src="../assets/pages/courses/fileUpCourse.js"></script>
    <script type="text/javascript">
      $( document ).ready(function() {
        //$('a[href="#"]').click( function(e) { e.preventDefault(); });
        //getDashboardPage();
        if(processRights("View Role") === false) {
          $(".roles").hide();
        }
        if(processRights("View Member") === false) {
          $(".members").hide();
        }
      });
      $(document).ajaxStop(function(event, xhr, ajaxOptions, data) {
        setUserInfo ( window.getUserInfo() );
      });
      function closeText(_this){
        const target = _this.id;
        document.querySelector("." + target).style.display = "none";
      }
      $(function(){
        if(getUserInfo().id){
          var page = get_url_value('page');
          if(!page){
          window.location.href = `${SITE_URL_PROTOCOL}home/?page=dashboard/dashboard`;
          }
        }
        var History = window.History;
        if (History.enabled) {
          var page = get_url_value('page');

          if(page == "dashboard/dashboard" || page == "cases/case" || page == "chapters/chapters" || page == "roles/roles" || page == "courses/courses" || page == "task/task" || page == "members/members"){
            $('#navRight a.navlink').removeClass("active");
            var parts = page.split('/');
            var page_flinkto = parts[parts.length - 1];
            $("."+page_flinkto).addClass("active");
            var path = page ? page : 'dashboard';
            // Load the page
            load_page_content(path);
            if(page == "roles/roles"){
              getRoles();
            }
            if(page == "courses/courses"){
              $.getScript(`${SITE_URL_PROTOCOL}/assets/pages/courses/courses.js`, function() {});   
            }
          }else{
            window.location.href = `${SITE_URL_PROTOCOL}home/?page=dashboard/dashboard`;
          }
        } else {
          return false;
        }
        
        // Content update and back/forward button handler
        History.Adapter.bind(window, 'statechange', function() {
          var State = History.getState(); 
          // Do ajax
          console.log(State.data.path);
          if(State.data.path){
            load_page_content(State.data.path);
          }
          if(State.data.path == "roles/roles"){
            getRoles();
          }
          if(State.data.path == "courses/courses"){
            $.getScript(`${SITE_URL_PROTOCOL}/assets/pages/courses/courses.js`, function() {});   
          }
          // Log the history object to your browser's console
          History.log(State);
        });
      
        // Navigation link handler
        $('body').on('click', 'li a', function(e) {
          e.preventDefault();
          
          var urlPath = $(this).attr('href');
          var title = $(this).text(); 
          if(urlPath == "dashboard/dashboard" || urlPath == "cases/case" || urlPath == "chapters/chapters" || urlPath == "roles/roles" || urlPath == "courses/courses" || urlPath == "task/task" || urlPath == "members/members"){
              History.pushState({path: urlPath}, title, './?page=' + urlPath); // When we do this, History.Adapter will also execute its contents.    
            }
        });
        
        function load_page_content(page) {
          $.ajax({  
            type: 'get',
            url: '../assets/pages/'+ page + '.html',
            data: {},           
            success: function(response) {
              $('#app-admin').html(response);
            }
          });
        }
        
        function get_url_value(variable) {
           var query = window.location.search.substring(1);
           var vars = query.split("&");
           for (var i=0;i<vars.length;i++) {
               var pair = vars[i].split("=");
               if(pair[0] == variable){return pair[1];}
           }
           return(false);
          }        
      });
      </script>
  </body>
</html>
